<!DOCTYPE html>
<html layout:decorator="shared/mainlayout"
	xmlns:th="http://www.thymeleaf.org">
<head>
<title>Entry</title>
</head>
<body>
	<th:block layout:fragment="content">
		<legend>Users</legend>
		<div class="button-margin">
			<a role="button" class="btn btn-primary"
				th:href="@{/user}"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>&nbsp;Create a User</a>
		</div>
		<div class="mb-1" >&nbsp;</div>
		<table class="table table-bordered table-striped">
			<thead>
				<tr>
					<th class="text-center">Full name</th>
					<th class="text-center">Email</th>
					<th class="text-center">Role</th>
					<th class="text-center">Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr th:if="${#lists.size(users) == 0}">
					<td colspan="9">No Users</td>
				</tr>
				<tr th:each="user : ${users}">
					<td th:text="@{${user.firstName} + ' ' + ${user.lastName}}" class="text-center"></td>
					<td th:text="${user.username}" class="text-center"></td>
					<td class="text-center">						
						<th:block th:each="role, iter : ${user.roles}" >	
							<span>
								<th:block th:if="${ role.name == T(mum.swe.mumsched.enums.RoleEnum).ROLE_ADMIN.toString() } " th:text="#{role.admin}"></th:block>	
								<th:block th:if="${ role.name == T(mum.swe.mumsched.enums.RoleEnum).ROLE_FACULTY.toString()  } " th:text="#{role.faculty}"></th:block>	
								<th:block th:if="${ role.name == T(mum.swe.mumsched.enums.RoleEnum).ROLE_STUDENT.toString()  } " th:text="#{role.student}"></th:block>					
							<th:block th:text="@{${iter.count != iter.size} ? ', ' : ''}"></th:block>
							</span>
						</th:block>
					</td>
					<td class="text-center">
						<a role="button" class="btn btn-primary"
							th:href="${user.username == username ? '/adminprofile' : '/user/' + user.id }"
							><span class="fa fa-pencil" aria-hidden="true"></span> Edit</a>
						&nbsp;
						<a role="button" class="btn btn-primary"
							th:href="@{/user/delete/{id}(id=${user.id})}">
							<span class="fa fa-trash-o" aria-hidden="true"></span> Delete</a>
					</td>
				</tr>
			</tbody>
		</table>
	</th:block>
	<th:block layout:fragment="footer">
		</script>
	</th:block>
</body>
</html>