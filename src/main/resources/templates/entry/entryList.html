<!DOCTYPE html>
<html layout:decorator="shared/mainlayout"
	xmlns:th="http://www.thymeleaf.org">
<head>
<title>Entry</title>
</head>
<body>
	<th:block layout:fragment="content">
		<legend>Entry</legend>
		<div class="button-margin">
			<a role="button" class="btn btn-primary"
				th:href="@{/entry/addNew}"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>&nbsp;New Entry</a>
		</div>
		<div class="mb-1" >&nbsp;</div>
		<table class="table table-bordered table-striped">
			<thead>
				<tr>
					<th rowspan="2" class="text-center" style="vertical-align: middle !important;" th:text="#{field.name}">Name</th>
					<th rowspan="2" class="text-center" style="vertical-align: middle !important;">Date</th>
					<th colspan="3" class="text-center" style="vertical-align: middle !important;">FPP</th>
					<th colspan="3" class="text-center" style="vertical-align: middle !important;">MPP</th>
					<th rowspan="2" class="text-center" style="vertical-align: middle !important;">&nbsp;</th>
				</tr>
				<tr>
					<th class="text-center">Total</th>
					<th class="text-center">CPT</th>
					<th class="text-center">OPT</th>
					<th class="text-center">Total</th>
					<th class="text-center">CPT</th>
					<th class="text-center">OPT</th>
				</tr>
			</thead>
			<tbody>
				<tr th:if="${entryList.empty}">
					<td colspan="9">No Entry</td>
				</tr>
				<tr th:each="item : ${entryList}">
					<td th:text="${item.name}" class="text-center"></td>
					<td th:text="${item.entryDate}" class="text-center"></td>
					<!-- FPP -->
					<td th:text="${item.fpp}" class="text-right"></td>
					<td th:text="${item.fppCPT}" class="text-right"></td>
					<td th:text="${item.fppOPT}" class="text-right"></td>
					<!-- MPP -->
					<td th:text="${item.mpp}" class="text-right"></td>
					<td th:text="${item.mppCPT}" class="text-right"></td>
					<td th:text="${item.mppOPT}" class="text-right"></td>
					<td class="text-center">
						<!-- <a role="button" class="btn btn-primary"
							th:href="@{/entry/edit/{id}(id=${item.id})}"><span class="glyphicon glyphicon-add" aria-hidden="true"></span>Faculties</a>
						&nbsp; -->
						<a role="button" class="btn btn-primary"
							th:href="@{/entry/edit/{id}(id=${item.id})}"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span>Edit</a>
						&nbsp;
						<a role="button" class="btn btn-primary"
							th:href="@{/entry/delete/{id}(id=${item.id})}">
							<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>Delete</a>
					</td>
				</tr>
			</tbody>
		</table>
	</th:block>
	<th:block layout:fragment="footer">
		<script>
			$(document).ready(function() {
				var deleteLink = $("a:contains('Delete')");

				$(deleteLink).click(function(event) {
					dialog.confirmDefault(function () {
					    	post($(event.target).attr("href"), function(ajaxResult) {
					    		if(ajaxResult.isSuccess){
					    			// remove deleted row
								$(event.target).closest("tr").remove();
					    		}
					    		
							dialog.showAjaxMessage(ajaxResult);
						});
				    });
					
					event.preventDefault();
				});
			});
		</script>
	</th:block>
</body>
</html>